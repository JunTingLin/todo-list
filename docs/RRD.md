# PRD.md

## 1. 背景與動機（Background & Motivation）
本專案旨在設計並實作一個具備日誌監控能力的 RESTful API TODO List 待辦事項

## 2. 目標（Objectives）
- 提供一個可獨立運行的 RESTful API 微服務
- 提供簡單明確的資源管理功能，以利專注於系統行為與可觀測性設計
- 確保每一次 API 請求皆能被追蹤、記錄與量測

## 3. 非目標（Non-Goals）
- 不追求完整的使用者驗證或權限管理機制
- 不實作複雜的資料庫設計
- 不要求實際部署至雲端環境，在本地端即可運行
- 不要求實作完整的分散式追蹤系統（Tracing）

## 4. 使用者與使用情境（Users & Scenarios）
- API 使用者: 透過 HTTP 呼叫 API 以新增、修改、刪除、查詢待辦事項
- 系統維運人員：
    - 能追蹤單一請求是否成功處理
    - 快速定位錯誤請求的發生時間與原因
    - 觀察系統近期的請求量與延遲趨勢

## 功能需求（Functional Requirements）
### 5.1 待辦事項管理
系統需提供 RESTful API 以管理待辦事項（Todo items），至少支援以下操作：
- 建立待辦事項
- 查詢單一待辦事項
- 查詢待辦事項清單
- 更新待辦事項
- 刪除待辦事項

### 5.2 健康檢查
- 系統需提供健康檢查端點以確認服務狀態

### 6. 非功能需求（Non-Functional Requirements）
#### 6.1 日誌（Logging）
- 系統需針對每一次 API 請求產生日誌紀錄
    - 日誌需至少包含以下資訊：
        - HTTP 方法
        - API 路徑
        - 回應狀態碼
        - 請求處理時間（Latency）
        - 請求識別碼（request_id）

- 系統需支援請求識別碼（request_id），若 API 使用者提供則沿用，否則由系統自動產生並於回應中回傳
- 日誌格式需為結構化格式，便於後續分析與機器處理
- 日誌中不得包含敏感資訊（如密碼、存取權杖等）

#### 6.2 指標（Metrics）
- 系統需能量測以下指標：
    - API 請求次數
    - API 請求延遲
- 指標需能被外部監控系統定期擷取
- 指標設計需避免高基數標籤，以維持系統效能與可維運性

#### 6.3 錯誤處理（Error Handling）
- 系統發生錯誤時，需記錄錯誤資訊於日誌中
- 對外 API 回應不得洩漏內部系統實作細節

- 本系統不包含身分驗證與授權機制
- 資料僅暫存於記憶體中，不提供持久化保證
- 系統重啟後資料可能遺失

#### 7. 驗收條件（Acceptance Criteria）
- API 功能可正常執行待辦事項的建立、查詢、更新與刪除
- 每一次 API 請求皆會產生對應的日誌紀錄
- 每一筆日誌可透過請求識別碼對應至單一 API 請求
- 系統可提供即時的請求次數與延遲指標
- 日誌中不包含任何敏感資訊
- 系統可獨立啟動並對外提供服務